<html>
<heading>
	<title>Seating</title>
	<link href="/resources/css/dragula.min.css" rel="stylesheet" type="text/css">
	<link href="/resources/css/seating.css" rel="stylesheet" type="text/css">
</heading>
<body>
	{{ nav_bar }}
	{% if not msg == None %}
	<div>
		{{msg}}
	</div>
	{% endif %}

	{% if classrooms|length > 0 %}
		<form method="get" action="/seating">
			<label>Select a Class
				<select name="classroom">
					<option value=""></option>
					{% for classroom_select in classrooms %}
						<option value="{{ classroom_select.key.urlsafe() }}">
							{{ classroom_select.name }}
						</option>
					{% endfor %}
				</select>
			</label>
			<button>Go!</button>
	  </form>
	{% endif %}

	{% if classroom %}
		<h1>Seating for Class {{ classroom.name }}</h1>

		{% if not day == None %}
			<h1 id="day">
				Day {{day}}
			</h1>
		{% endif %}

		<section id="room" class="clearfix">
			<div id="left"></div>
			<div id="right"></div>
		</section>
		{% for i in range(0, students|length, 6) %}
		<div class="table clearfix container" name="{{ i / 6 }}">
			{% for j in range(6) %}
				<div class="student" id="{{ students[i + j].key.urlsafe() }}">
					{{ students[i + j].name }}
				</div>
			{% endfor %}
		</div>
		{% endfor %}

		<form method="get" action="/seating">
			<input type="hidden" name="classroom" value="{{classroom.key.urlsafe()}}">
			<input type="submit" value="Regenerate Seating">
		</form>
		<form method="post" action="/seating">
			<input type="hidden" name="classroom_id"
						 value="{{ classroom.key.urlsafe() }}">
			<input type="hidden" name="keystring">
			<h4>Save Seating Arrangement</h4>
			<label>Day<input name="day" type="text"></label>
			<input type="submit" value="Save" id="save">
		</form>
	{% endif %}
	<script src='/resources/scripts/dragula.min.js'></script>
	<script src='/resources/scripts/seating.js'></script>
	<script>
		document.addEventListener('DOMContentLoaded', main, false);
	</script>
</body>
</html>
